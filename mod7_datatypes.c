#include<windows.h>
#include<stdio.h>
#include<lmcons.h>

//Function Prototypes


//Macros (for future use)
#define NT_SUCCESS(Status) (((NTSTATUS)(Status)) >= 0)

INT main(VOID){

    DWORD dwVar = 42; //4 bytes, 2**32-1-

    SIZE_T stVar = sizeof(int); //4byte on 32bit, 8byte on 64bit, holds size of an object
    VOID* pVar = &dwVar; //Absence of specific data type
    PVOID pVarUpdate = &dwVar; //4byte pointer of any data type on 32-bit systems, 8byte on 64bit


    printf("[+]pVar = 0x%p | %d\n", pVar, *(INT*)pVar);
    printf("[+]pVarUpdate = 0x%p | %d\n", pVarUpdate, *(INT*)pVarUpdate);

    //HANDLE is an object managed by the OS (process, thread, file, etc)
    //HMODULE is a handle to a module, contains base address of the module in memory

    LPCSTR strVar1 = "test str"; // const char*

    PCWSTR strVar2 = L"test str";

    printf("[+]strVar1 = 0x%p | %s\n", &strVar1, strVar1);     
    printf("[+]strVar2 = 0x%p | %s\n", &strVar2, strVar2);     

    INT testVar = 123;
    PVOID pTestVoid = &testVar;
    printf("---%p---%d---\n", pTestVoid, *(INT*)pTestVoid);
    //pTestVoid = (ULONG_PTR)pTestVoid + 10; apparently works better on windows systems? my compiler likes the following better:
    pTestVoid = pTestVoid + 10;
    printf("---%p---%d---\n", pTestVoid, *(INT*)pTestVoid);

    char testChar1[20] = "test again\0";
    char* testChar2 = "12312312testingagain2";
    printf("--%s--%d\n", testChar1, sizeof(testChar1));
    printf("--%s--%d\nThen 0x%p is %lu\n", testChar2, sizeof(testChar2), &testChar2, sizeof(testChar2));
    printf("----\n");
    WCHAR testWChar1[20] = L"test again";
    WCHAR* testWChar2 = L"testing again 222222222222";
    wprintf(L"--%ls--%d\n", testWChar1, sizeof(testWChar1));
    wprintf(L"--%ls--%d\n", testWChar1, sizeof(testWChar2));
    printf("%d, %lu\n", sizeof(&testWChar2), sizeof(*testWChar2));
    
    printf("\n------\n");

    HANDLE hFile = NULL;
    LPCWSTR filePath = L"C:\\Users\\Loveless\\Desktop\\Maldev.txt";
    LPCSTR filePathA = "C:\\Users\\Loveless\\Desktop\\Maldev.txt";

    hFile = CreateFileW(
        filePath,
        GENERIC_ALL,
        0,
        NULL,
        CREATE_ALWAYS,
        FILE_ATTRIBUTE_NORMAL,
        NULL
    );

    WaitForSingleObject(hFile, 10000);

    if (hFile == INVALID_HANDLE_VALUE){
        printf("[!] CreateFileW Api Function Failed With Error: %d\n", GetLastError());
        return EXIT_FAILURE;
    }

    

    printf("Enter to exit....");
    getchar();

    return EXIT_SUCCESS;

}